<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>角色权限</title>
		<link href="../css/css.css" rel="stylesheet" type="text/css" />
    	<script src="../../js/jquery.js" type="text/javascript"></script>
	    <script type="text/javascript">
	        $(function () {
	            var RolePowerList = '001,002,002001,002002,003,998,998001,998002,999,999001,999002';
	            var arrPower = RolePowerList.split(",");
	            for (var i = 0; i < arrPower.length; i++) {
	                //$("#ck_" + i).attr("checked", "true");
	                $("#ck_" + arrPower[i]).prop("checked", "true");
	            }	
	            $("input[name=ckPower]").change(function () {
	                var objs = $("input[name=ckPower]");
	                var selfId = this.id.split("_")[1]; //取出自己ID的数字部分
	                for (var i = 0; i < objs.length; i++) {
	                    var objId = objs[i].id.split("_")[1]; //取出循环过程中每个多选框的数字部分
	                    //选择的是上一级，且切换所有的下级                  
	                    if (selfId.length < objId.length && selfId == objId.substr(0, selfId.length)) //判断是否是下级
	                    {
	                        objs[i].checked = this.checked;
	                    }
	                }
	                //选择的是下级，并且选择的是checked=true，则将上级也变成true
	                if (selfId.length > 3 && this.checked == true) {
	                    $("#ck_" + selfId.substr(0, selfId.length - 3)).prop("checked", "true");
	                }
	                //选择的是下级,并且选择的是checked=false,并且同级别所有都为false,则将上级checked也变成false
	                if (selfId.length > 3 && this.checked == false) {
	                    var rchecked = false;  //假设父级默认没有选中
	                    for (var i = 0; i < objs.length; i++) {
	                        var objId = objs[i].id.split("_")[1];
	                        if (selfId.length = objId.length && selfId.substr(0, selfId.length - 3) == objId.substr(0, objId.length - 3)) {
	                            if (objs[i].checked == true)
	                                rchecked = true;
	                        }
	                    }
	                    $("#ck_" + selfId.substr(0, selfId.length - 3)).prop("checked", rchecked); //低版本jq，使用attr
	                }
	            })
	
	        })
	    </script>

	</head>
	<body>
		<div id="divPowerTitle" class="divtitle">权限配置-书籍资料管理员</div>
        <div>           
            <div style="height:30px; line-height:30px;">
            <input type="checkbox" id='ck_001' value='001' name="ckPower" />
            <span style=" font-weight:bold;">会员管理</span>
             </div>                  
            <input type="hidden" name="rptOne$ctl00$hdOnePowerId" id="rptOne_hdOnePowerId_0" value="001" />
            <div style=" clear:both;"></div><hr />
        
            <div style="height:30px; line-height:30px;">
            <input type="checkbox" id='ck_002' value='002' name="ckPower" />
            <span style=" font-weight:bold;">商品管理</span>
             </div>                  
            <input type="hidden" name="rptOne$ctl01$hdOnePowerId" id="rptOne_hdOnePowerId_1" value="002" />
            <div style=" clear:both;">
                    <div style=" width:150px; float:left; height:30px; line-height:30px">
                         <input type="checkbox" id='ck_002001' value='002001' name="ckPower" />
                        商品类型管理                             
                    </div>
                
                    <div style=" width:150px; float:left; height:30px; line-height:30px">
                         <input type="checkbox" id='ck_002002' value='002002' name="ckPower" />
                        商品信息管理                             
                    </div>
                </div><hr />
        
            <div style="height:30px; line-height:30px;">
            <input type="checkbox" id='ck_003' value='003' name="ckPower" />
            <span style=" font-weight:bold;">订单管理</span>
             </div>                  
            <input type="hidden" name="rptOne$ctl02$hdOnePowerId" id="rptOne_hdOnePowerId_2" value="003" />
            <div style=" clear:both;"></div><hr />
        
            <div style="height:30px; line-height:30px;">
            <input type="checkbox" id='ck_998' value='998' name="ckPower" />
            <span style=" font-weight:bold;">个人中心</span>
             </div>                  
            <input type="hidden" name="rptOne$ctl03$hdOnePowerId" id="rptOne_hdOnePowerId_3" value="998" />
            <div style=" clear:both;">
                    <div style=" width:150px; float:left; height:30px; line-height:30px">
                         <input type="checkbox" id='ck_998001' value='998001' name="ckPower" />
                        基本信息                             
                    </div>
                
                    <div style=" width:150px; float:left; height:30px; line-height:30px">
                         <input type="checkbox" id='ck_998002' value='998002' name="ckPower" />
                        密码维护                             
                    </div>
                </div><hr />
        
            <div style="height:30px; line-height:30px;">
            <input type="checkbox" id='ck_999' value='999' name="ckPower" />
            <span style=" font-weight:bold;">系统管理</span>
             </div>                  
            <input type="hidden" name="rptOne$ctl04$hdOnePowerId" id="rptOne_hdOnePowerId_4" value="999" />
            <div style=" clear:both;">
                    <div style=" width:150px; float:left; height:30px; line-height:30px">
                         <input type="checkbox" id='ck_999001' value='999001' name="ckPower" />
                        角色管理                             
                    </div>
                
                    <div style=" width:150px; float:left; height:30px; line-height:30px">
                         <input type="checkbox" id='ck_999002' value='999002' name="ckPower" />
                        用户管理                             
                    </div>
                </div><hr />
                
        </div>
        <input type="submit" name="btUpdatePower" value="确定" id="btUpdatePower" />
	</body>
</html>
